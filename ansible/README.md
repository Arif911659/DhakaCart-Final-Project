# ЁЯдЦ Ansible Automation Guide for DhakaCart

**ржХрзЗржи Ansible ржжрж░ржХрж╛рж░?**
ржЖржкржирж╛рж░ ржПржЦржи AWS-ржП ржЕржирзЗржХржЧрзБрж▓рзЛ рж╕рж╛рж░рзНржнрж╛рж░ (Bastion, Master-1, Master-2, Worker-1, Worker-2, Worker-3)ред
ржзрж░рзБржи ржЖржкржирж┐ рж╕ржм рж╕рж╛рж░рзНржнрж╛рж░рзЗ `apt update` ржХрж░рждрзЗ ржЪрж╛ржи ржмрж╛ рж╕ржм рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ `uptime` ржжрзЗржЦрждрзЗ ржЪрж╛ржиред
- **Ansible ржЫрж╛рзЬрж╛:** ржЖржкржирж╛ржХрзЗ рзм ржмрж╛рж░ ржЖрж▓рж╛ржжрж╛ ржЖрж▓рж╛ржжрж╛ SSH ржХрж░рзЗ ржХржорж╛ржирзНржб ржЪрж╛рж▓рж╛рждрзЗ рж╣ржмрзЗред
- **Ansible ржжрж┐рзЯрзЗ:** ржЖржкржирж┐ ржЖржкржирж╛рж░ ржкрж┐рж╕рж┐ ржерзЗржХрзЗ **ржПржХржЯрж╛ ржХржорж╛ржирзНржб** ржжрзЗржмрзЗржи, рж╕рзЗржЯрж╛ рж╕ржм рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржПржХрж╕рж╛ржерзЗ рж░рж╛ржи рж╣ржмрзЗред

Ansible рж╣рж▓рзЛ ржЖржкржирж╛рж░ **"рж░рж┐ржорзЛржЯ ржХржирзНржЯрзНрж░рзЛрж▓"** ржпрж╛ ржжрж┐рзЯрзЗ ржЖржкржирж┐ рж╕ржм рж╕рж╛рж░рзНржнрж╛рж░ ржПржХ ржЬрж╛рзЯржЧрж╛ ржерзЗржХрзЗ ржорзНржпрж╛ржирзЗржЬ ржХрж░ржмрзЗржиред

---

## ЁЯЫа Step 1: ржЗржирзНрж╕ржЯрж▓рзЗрж╢ржи (ржЖржкржирж╛рж░ ржкрж┐рж╕рж┐рждрзЗ)

ржкрзНрж░ржержорзЗ ржЖржкржирж╛рж░ рж▓рзЛржХрж╛рж▓ ржорзЗрж╢рж┐ржирзЗ Ansible ржЗржирзНрж╕ржЯрж▓ ржХрж░рзБржи:

```bash
sudo apt update
sudo apt install -y ansible
```

ржЪрзЗржХ ржХрж░рзБржи:
```bash
ansible --version
```

---

## тЪЩя╕П Step 2: ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи (Auto-Setup)

ржмрж╛рж░ржмрж╛рж░ ржорзНржпрж╛ржирзБрзЯрж╛рж▓рж┐ IP ржХржкрж┐-ржкрзЗрж╕рзНржЯ ржХрж░рж╛рж░ ржжрж░ржХрж╛рж░ ржирзЗржЗред ржЖржорж░рж╛ ржПржХржЯрж┐ ржЕржЯрзЛржорзЗрж╢ржи рж╕рзНржХрзНрж░рж┐ржкрзНржЯ ржмрж╛ржирж┐рзЯрзЗржЫрж┐ ржпрж╛ Terraform ржерзЗржХрзЗ IP ржирж┐рзЯрзЗ ржЕржЯрзЛржорзЗржЯрж┐ржХ Ansible Inventory рждрзИрж░рж┐ ржХрж░рзЗ ржжрзЗржмрзЗред

ржХржорж╛ржирзНржбржЯрж┐ рж░рж╛ржи ржХрж░рзБржи:
```bash
./scripts/generate-ansible-inventory.sh
```

ржПржЯрж┐ ржЕржЯрзЛржорзЗржЯрж┐ржХ `ansible/inventory/hosts.ini` ржлрж╛ржЗрж▓ржЯрж┐ ржЬрзЗржирж╛рж░рзЗржЯ ржХрж░рзЗ ржжрзЗржмрзЗред

ржлрж╛ржЗрж▓ржЯрж┐ ржЪрзЗржХ ржХрж░рждрзЗ ржЪрж╛ржЗрж▓рзЗ:
```bash
cat ansible/inventory/hosts.ini
```

---

## ЁЯЪА Step 3: ржХрж╛ржирзЗржХрж╢ржи ржЯрзЗрж╕рзНржЯ

рж╕ржм рж╕рж╛рж░рзНржнрж╛рж░ ржарж┐ржХржарж╛ржХ ржХрж╛ржирзЗржХрзНржЯ рж╣ржЪрзНржЫрзЗ ржХрж┐ржирж╛ ржжрзЗржЦрзБржи:

```bash
cd ~/DhakaCart-03-test/ansible
ansible all -m ping
```
ржпржжрж┐ рж╕ржм рж╕ржмрзБржЬ ржмрж╛ `SUCCESS` ржЖрж╕рзЗ, рждрж╛рж░ ржорж╛ржирзЗ ржЖржкржирж┐ рж░рзЗржбрж┐!

---

## тЪб Step 4: ржХрж╛ржЬрзЗрж░ ржХржорж╛ржирзНржб (Daily Tasks)

### рзз. рж╕ржм рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ Uptime ржжрзЗржЦрж╛
```bash
ansible all -m command -a "uptime"
```

### рзи. рж╕ржм рж╕рж╛рж░рзНржнрж╛рж░ ржПржХрж╕рж╛ржерзЗ ржЖржкржбрзЗржЯ ржХрж░рж╛
```bash
ansible all -m apt -a "name=* state=latest update_cache=yes" --become
```
*(`--become` ржорж╛ржирзЗ `sudo` ржжрж┐рзЯрзЗ рж░рж╛ржи рж╣ржмрзЗ)*

### рзй. рж╕ржм ржУрзЯрж╛рж░рзНржХрж╛рж░ ржирзЛржбрзЗ ржбрж┐рж╕рзНржХ рж╕рзНржкрзЗрж╕ ржжрзЗржЦрж╛
```bash
ansible workers -m command -a "df -h"
```

### рзк. Kubernetes Logs ржжрзЗржЦрж╛ (Master ржерзЗржХрзЗ)
```bash
ansible masters -m command -a "kubectl get nodes"
```

---

## ЁЯУВ ржлрж╛ржЗрж▓ рж╕рзНржЯрзНрж░рж╛ржХржЪрж╛рж░

```
ansible/
тФЬтФАтФА ansible.cfg       # ржЧрзНрж▓рзЛржмрж╛рж▓ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи (рж╣рж╛ржд ржжрзЗржУрзЯрж╛рж░ ржжрж░ржХрж╛рж░ ржирзЗржЗ)
тФЬтФАтФА inventory/
тФВ   тФФтФАтФА hosts.ini     # ржПржЦрж╛ржирзЗржЗ рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ IP ржмрж╕рж╛ржмрзЗржи
тФЬтФАтФА playbooks/        # ржмрзЬ ржЕржЯрзЛржорзЗрж╢ржи рж╕рзНржХрзНрж░рж┐ржкрзНржЯ (ржпрзЗржоржи ржкрзБрж░рзЛ рж╕рж╛рж░рзНржнрж╛рж░ рж╕рзЗржЯржЖржк)
тФФтФАтФА roles/            # ржЫрзЛржЯ ржЫрзЛржЯ ржХрж╛ржЬрзЗрж░ ржлрзЛрж▓рзНржбрж╛рж░
```

---

**рж╕рж╣ржЬ ржХржерж╛:**
Ansible ржжрж┐рзЯрзЗ ржЖржкржирж┐ ржПржХ ржХржорж╛ржирзНржбрзЗ ржкрзБрж░рзЛ ржХрзНрж▓рж╛рж╕рзНржЯрж╛рж░ ржХржирзНржЯрзНрж░рзЛрж▓ ржХрж░ржмрзЗржиред ржорзНржпрж╛ржирзБрзЯрж╛рж▓рж┐ SSH ржХрж░рж╛рж░ ржжрж┐ржи рж╢рзЗрж╖!
