apiVersion: v1
kind: ConfigMap
metadata:
  name: dhakacart-config
  namespace: dhakacart
data:
  # Backend configuration
  NODE_ENV: "production"
  PORT: "5000"
  DB_HOST: "dhakacart-db-service"
  DB_PORT: "5432"
  DB_NAME: "dhakacart_db"
  REDIS_HOST: "dhakacart-redis-service"
  REDIS_PORT: "6379"
  
  # Frontend configuration
  # Using Load Balancer URL for backend API access (browser can access this)
  # IMPORTANT: ALB DNS changes every 4 hours in LAB environment
  # Use dynamic update script: ./scripts/update-alb-dns-dynamic.sh
  # This script automatically gets ALB DNS from Terraform and updates ConfigMap
  # Manual update: kubectl patch configmap dhakacart-config -n dhakacart --patch '{"data":{"REACT_APP_API_URL":"http://NEW_ALB_DNS/api"}}'
  REACT_APP_API_URL: http://dhakacart-k8s-alb-1174632945.ap-southeast-1.elb.amazonaws.com/api
